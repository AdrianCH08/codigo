using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace platPropSegundoParcial
{
    //Clase program
    //Autor: Adrian Eduardo Castro Hernandez
    //Fecha: 16/03/2023
    //Versión: 1.0.0
    //Modificación: 16/03/2023
    class Program
    {
        static void Main(string[] args)
        {
            //Variables de la clase Program
            string leer = "";
            int n = 0;
            int libro = 0;
            int idlibro = 0;
            int opcion = 0;
            int separador = 0;
            int postit = 0;
            int pluma = 0;
            int trabajo = 0;
            int ventaseparador = 0;
            int ventapostit = 0;
            int ventapluma = 0;

            //Inicia ciclo del menu principal
            do
            {
                //Seleccionar menu
                Console.ForegroundColor = ConsoleColor.Cyan;
                Console.WriteLine("BIENVENIDO A LIBRERIA");
                Console.WriteLine("");
                Console.WriteLine("¿Qué desea hacer?");
                Console.WriteLine("1.Libros  2.Almacén  3.Salir");
                leer = Console.ReadLine();
                opcion = Convert.ToInt32(leer);

                //Switch menu secundario
                switch (opcion)
                {
                    //Opcion INDEXER
                    case 1:
                        do
                        {
                            Console.ForegroundColor = ConsoleColor.White;
                            Console.WriteLine("");
                            Console.WriteLine("1.Ver lista de libros  2.Buscar libro  3.Regresar");
                            leer = Console.ReadLine();
                            libro = Convert.ToInt32(leer);

                            //Seleccionar opcion para indexer
                            switch (libro)
                            {

                                case 1:
                                    //Creamos al libro
                                    CLibros misLibros = new CLibros();
                                    Console.ForegroundColor = ConsoleColor.White;
                                    //Imprime la lista de libros
                                    for (n = 0; n <= 19; n++)
                                    {
                                        misLibros[n].MuestraInformacion();
                                    }
                                    break;

                                case 2:
                                    //Declaramos el libro
                                    CLibros misLibro = new CLibros();

                                    //Obtener id del libro
                                    Console.ForegroundColor = ConsoleColor.Red;
                                    Console.WriteLine("Ingrese ID");
                                    leer = Console.ReadLine();
                                    idlibro = Convert.ToInt32(leer);

                                    //Obtenemos el libro
                                    CLibro miLibro = misLibro[idlibro];
                                    miLibro.MuestraInformacion();

                                    break;

                                default:

                                    libro = 5;
                                    break;
                            }//Termina switch

                        } while (libro <= 3);

                        break;

                    //Parte del delegado
                    case 2:
                        //Creamos el CAlmacen
                        Console.WriteLine("Agregar datos al almacen");
                        Console.WriteLine("Agregar separadores");
                        //Se pregunta el total de separadores
                        leer = Console.ReadLine();
                        separador = Convert.ToInt32(leer);
                        Console.WriteLine("Agregar Post Its");
                        //Se pregunta el total de Post Its 
                        leer = Console.ReadLine();
                        postit = Convert.ToInt32(leer);
                        Console.WriteLine("Agregar plumas");
                        //Se pregunta el total de plumas
                        leer = Console.ReadLine();
                        pluma = Convert.ToInt32(leer);
                        CAlmacen miAlmacen = new CAlmacen(separador, postit, pluma);
                        miAlmacen.AdicionaSeparador(new CAlmacen.Separadores(InformeSeparadores));
                        miAlmacen.AdicionaPostit(new CAlmacen.Postits(InformePostits));
                        miAlmacen.AdicionaPluma(new CAlmacen.Plumas(InformePlumas));
                        //Guardamos los datos
                        miAlmacen.TrabajoSeparador(separador);
                        miAlmacen.TrabajoPost(postit);
                        miAlmacen.TrabajoPluma(pluma);

                        //Ciclamos el delegado
                        do
                        {
                            Console.ForegroundColor = ConsoleColor.DarkCyan;
                            Console.WriteLine("Seleccionar la venta ");
                            Console.WriteLine("1.Separadores 2.Post its 3.Plumas");
                            leer = Console.ReadLine();
                            trabajo = Convert.ToInt32(leer);
                            switch (trabajo)
                            {
                                case 1:
                                    //Cuantificamos separadores
                                    Console.WriteLine("Ingrese cantidad unitaria");
                                    leer = Console.ReadLine();
                                    ventaseparador = Convert.ToInt32(leer);
                                    separador = separador - ventaseparador;

                                    //Validamos producto agotado
                                    if (separador <= 0)
                                    {
                                        trabajo = 5;
                                        Console.ForegroundColor = ConsoleColor.Red;
                                        Console.WriteLine("Separadores agotados");
                                    }
                                    else
                                        miAlmacen.TrabajoSeparador(separador);
                                    break;

                                case 2:
                                    //Cuantificamos postits
                                    Console.WriteLine("Ingrese cantidad unitaria");
                                    leer = Console.ReadLine();
                                    ventapostit = Convert.ToInt32(leer);
                                    postit = postit - ventapostit;
                                    //Validamos producto agotado
                                    if (postit <= 0)
                                    {
                                        trabajo = 5;
                                        Console.ForegroundColor = ConsoleColor.Red;
                                        Console.WriteLine("Postits agotados");
                                    }
                                    else
                                        miAlmacen.TrabajoPost(postit);
                                    break;

                                case 3:
                                    //Cuantificamos plumas
                                    Console.WriteLine("Ingrese cantidad unitaria");
                                    leer = Console.ReadLine();
                                    ventapluma = Convert.ToInt32(leer);
                                    pluma = pluma - ventapluma;

                                    //Validamos producto agotado
                                    if (pluma <= 0)
                                    {
                                        trabajo = 5;
                                        Console.ForegroundColor = ConsoleColor.Red;
                                        Console.WriteLine("Plumas agotadas");
                                    }
                                    else
                                        miAlmacen.TrabajoPluma(pluma);
                                    break;
                                default:
                                    trabajo = 5;
                                    break;
                            }

                        } while (trabajo <= 4);//Termina ciclo delegado

                        break;

                    default:
                        opcion = 5;
                        break;

                }//Termina switch menu secundario

            } while (opcion <= 3); //Fin del menu inicial
            Console.ForegroundColor = ConsoleColor.White;
            Console.WriteLine("Ha salido");
        }

        //Metodo para informar cuando se cumpla una condicion
        public static void InformeSeparadores(int numseparador)
        {
            Console.ForegroundColor = ConsoleColor.Red;
            Console.WriteLine("ATENCION: Quedan menos de 10 separadores");
            Console.WriteLine(" Quedan {0} separadores", numseparador);
        }

        //Metodo para informar cuando se cumpla una condicion
        public static void InformePostits(int numpostit)
        {
            Console.ForegroundColor = ConsoleColor.Red;
            Console.WriteLine("ATENCION: Quedan menos de 10 postits");
            Console.WriteLine("Quedan {0} postits", numpostit);
        }

        //Metodo para informar cuando se cumpla una condicion
        public static void InformePlumas(int numpluma)
        {
            Console.ForegroundColor = ConsoleColor.Red;
            Console.WriteLine("ATENCION: Quedan menos de 10 plumas");
            Console.WriteLine("Quedan {0} plumas", numpluma);
        }
    }

}
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace platPropSegundoParcial
{
    //Clase encargada del Delegado
    //Autor: Adrian Eduardo Castro Hernandez
    //Fecha: 16/03/2023
    //Versión: 1.0.0
    //Modificación: 16/03/2023
    class CAlmacen
    {
        //Declaramos los delegados
        public delegate void Separadores(int numseparador);
        public delegate void Postits(int numpostit);
        public delegate void Plumas(int numpluma);

        //Variables de los delegados
        private int separadores = 0;
        private int postits = 0;
        private int plumas = 0;

        //Aqui estan las variables que usaremos para invocar
        private Separadores delseparadores;
        private Postits delpostits;
        private Plumas delplumas;

        //Metodo constructor de CAlmacen
        public CAlmacen(int numseparador, int numpostit, int numpluma)
        {
            //Asignamos valores iniciales
            separadores = numseparador;
            postits = numpostit;
            plumas = numpluma;
        }

        //Metodo de referencia para invocacion
        public void AdicionaSeparador(Separadores pMetodo)
        {
            delseparadores = pMetodo;
        }

        //Metodo de referencia para invocacion
        public void AdicionaPostit(Postits pMetodo)
        {
            delpostits = pMetodo;
        }

        //Metodo de referencia para invocacion
        public void AdicionaPluma(Plumas pMetodo)
        {
            delplumas = pMetodo;
        }

        //Propiedades get
        public int Separador { get { return separadores; } }
        public int Postit { get { return postits; } }
        public int Pluma { get { return plumas; } }

        //Metodo que realiza el trabajo del separador
        public void TrabajoSeparador(int pConsumo)
        {
            //Actualizamos los separadores
            separadores = pConsumo;

            Console.WriteLine("{0} separadores, {1} postits, {2} plumas", separadores, postits, plumas);

            //Verificamos que se cumpla la condicion para
            //invocar los handlers del evento

            //Condicion del evento para separadores
            if (separadores < 10)
            {
                //Invocamos el metodo
                delseparadores(separadores);
            }
        }

        //Metodo que realiza el trabajo del postit
        public void TrabajoPost(int pConsumo)
        {
            //Actualizamos las postits
            postits = pConsumo;

            Console.WriteLine("{0} separadores, {1} postits, {2} plumas", separadores, postits, plumas);

            //Verificamos que se cumpla la condicion para
            //invocar los handlers del evento

            //Condicion del evento para postits
            if (postits < 10)
            {
                //Invocamos el metodo
                delpostits(postits);
            }
        }

        //Metodo que realiza el trabajo de la pluma
        public void TrabajoPluma(int pConsumo)
        {
            //Actualizamos las plumas
            plumas = pConsumo;

            Console.ForegroundColor = ConsoleColor.Blue;
            Console.WriteLine("{0} separadores, {1} postits, {2} plumas", separadores, postits, plumas);

            //Verificamos que se cumpla la condicion para
            //invocar los handlers del evento

            //Condicion del evento para plumas
            if (plumas < 10)
            {
                //Invocamos el metodo
                delplumas(plumas);
            }
        }
    }


}
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace platPropSegundoParcial
{
    //Clase libro
    //Autor: Adrian Eduardo Castro Hernandez
    //Fecha: 16/03/2023
    //Versión: 1.0.0
    //Modificación: 16/03/2022

    class CLibro
    {
        //Variables de la clase CLibro
        string nombre;
        string isbn;
        int id;

        //Metodo constructor del libro
        public CLibro(int pid, string pnombre, string pisbn)
        {
            //Inicializamos los datos
            nombre = pnombre;
            isbn = pisbn;
            id = pid;
        }

        //Metodo Muestra la información CLibro 
        public void MuestraInformacion()
        {
            //Mostramos la información necesaria
            Console.ForegroundColor = ConsoleColor.Gray;
            Console.WriteLine("");
            Console.WriteLine("ID: {0} Nombre: {1}", id, nombre);
            Console.WriteLine("ISBN: {0}", isbn);

        }
    }
}
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace platPropSegundoParcial
{
    //Clase encargada de asignar valores al indexer
    //Autor: Adrian Eduardo Castro Hernandez
    //Fecha: 16/03/2023
    //Versión: 1.0.0
    //Modificación: 16/03/2023
    class CLibros
    {
        //Creacion array
        private CLibro[] disponibles;

        //Metodo para constructor de intancias para el indexer
        public CLibros()
        {
            disponibles = new CLibro[20];

            disponibles[0] = new CLibro(0, "Cien años de soledad", "ISBN 978-0307474728");
            disponibles[1] = new CLibro(1, "El gran Gatsby", "ISBN 978-0743273565");
            disponibles[2] = new CLibro(2, "Matar a un ruiseñor", "ISBN 978-0060935467");
            disponibles[3] = new CLibro(3, "Orgullo y prejuicio", "ISBN 978-0141439518");
            disponibles[4] = new CLibro(4, "Breve historia del tiempo", "(ISBN 978-8499895062");
            disponibles[5] = new CLibro(5, "El señor de los anillos", "ISBN 978-84-450-7559-9");
            disponibles[6] = new CLibro(6, "La Odisea", "ISBN 978-84-376-0304-9");
            disponibles[7] = new CLibro(7, "El alquimista", "ISBN 978-84-204-7627-0");
            disponibles[8] = new CLibro(8, "Don Quijote de la Mancha", " ISBN 978-84-376-0494-7");
            disponibles[9] = new CLibro(9, "1984", " ISBN 978-84-666-6642-3");
            disponibles[10] = new CLibro(10, "Crónica de una muerte anunciada", "ISBN 978-84-322-0247-4");
            disponibles[11] = new CLibro(11, "Moby Dick", " ISBN 978-84-9816-793-2");
            disponibles[12] = new CLibro(12, "Drácula", " ISBN 978-84-376-1131-0");
            disponibles[13] = new CLibro(13, "La metamorfosi", "ISBN 978-84-939460-2-8");
            disponibles[14] = new CLibro(14, "Rayuela", " ISBN 978-84-204-0755-5");
            disponibles[15] = new CLibro(15, "La Divina Comedia", "ISBN 978-84-670-4117-5");
            disponibles[16] = new CLibro(16, "La isla del tesoro", "22267982468");
            disponibles[17] = new CLibro(17, "El retrato de Dorian Gray", "ISBN 978-84-666-6159-6");
            disponibles[18] = new CLibro(18, "La casa de los espíritus", "ISBN 978-84-8306-049-9");
            disponibles[19] = new CLibro(19, "Los miserables", " ISBN 978-84-322-2352-4");
        }

        //Creamos indexer
        public CLibro this[int indice]
        {
            //Usamos el get para obtener el elemento en ese indice
            get { return disponibles[indice]; }

            //Usamos el set para colocar un elemento en ese indice
            set { disponibles[indice] = value; }
        }
    }

}

